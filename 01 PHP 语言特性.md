# PHP 语言特性

PHP 脚本在服务器上执行，然后将纯 HTML 结果发送回浏览器。

PHP 是一门弱类型的语言。

## PHP 基本语法

### PHP 脚本的开始与结束

```php
<?php
// PHP code
?>
```

PHP 文件后缀为 .php，通常为 HTML 标签和一些 PHP 脚本代码。

### PHP 注释

C/C++ 风格的注释：`//` 和 `/* */`

shell 风格的注释：`#`

### PHP 大小写

用户定义的类和函数、内置的结构以及关键字不区分大小写的。

但是变量是区分大小写的。

### PHP 变量

变量以 $ 符号开始，区分大小写。

* 变量的变量

通过 $ 符号作为前缀，引用变量的值作为新变量的名称。

```php
$foo = "bar";
$$foo = "baz";  // 变量 $bar 的值为 baz
```

* 变量的引用

引用就是如何创建变量的别名。这两个变量有相同的值但不同的名称，销毁其中任何一个变量的值，不会影响另一个变量的值。

```php
$b = 1;
$a = & $b; // $a = 1
```

* 变量的作用域

在函数里访问全局变量，需要使用 global 关键字。

PHP 将所有全局变量存储在一个名为 $GLOBALS[index] 的数组中。 index 保存变量的名称。这个数组可以在函数内部访问，也可以直接用来更新全局变量。

static 修饰的变量仍然是局部变量，保存上次调用的值，此变量在函数内是可见的。

### PHP 输出

`echo`：可以一次输出多个字符串，用逗号隔开。

`print`：一次只能输出一个字符串，返回值总为 1。

### PHP 数据类型

* 整形：`is_int()` 函数测试一个值是否是一个整形。

* 浮点数：`is_float()` 函数测试一个值是否是浮点数。

* 字符串：用单引号或双引号修饰。变量在双引号中会被解析，而在单引号中，不会被解析。

`is_string()` 函数测试一个值是否为字符串。

* 布尔型：用 true 或 false。

`is_bool()` 函数测试一个值是否是布尔型。

* 数组：array 修饰。遍历数组最常用的是 foreach 循环。

```php
$person = array("Andy", "Bob", "Ciny");

foreach($person as $name) {
    echo "Hello, {$name}\n";
}
```

`is_array()` 函数测试一个值是否为数组。

* 对象：class 关键字声明类的对象。

new 创建对象，类的属性和方法可以通过 `->` 访问。

`is_object()` 函数测试一个值是否为对象。

* 资源

每个活动的资源都有一个唯一的标识符，每个标识符对应着 PHP 内部结构表的一个数字，这个表保存了有关所有活动的资源的信息。

`is_resource()` 函数测试一个值是否为资源。

* 回调

回调是一些函数或对象的方法被另一些函数的调用。

* NULL 值：表示变量没有值，也可以数据类型为 NULL 的值。

`is_null()` 函数来测试一个值是否为 NULL。

var_dump() 函数返回变量的数据类型和值。

### PHP 常量

一个常量由英文字母、下划线、和数字组成，但数字不能作为首字母出现。(常量名不需要加 $ 修饰符)。

设置常量：
```php
bool define ( string $name , mixed $value [, bool $case_insensitive = false ] )

name：必选参数，常量名称，即标志符。
value：必选参数，常量的值。
case_insensitive ：可选参数，如果设置为 TRUE，该常量则大小写不敏感。默认是大小写敏感的。
```

### PHP 字符串

将两个字符串连接在一起，使用并置运算符 `.`。

`strlen() 函数：字符串的长度`

`strpos() 函数：在字符串内查找一个字符或一段指定的文本`

用单引号括起来的字符串中不能插值。

用双引号括起来的字符串允许插值并且支持多种转义序列。

用 heredoc 可以很容易地把多行字符串放在程序中。 `<<<` 符号告诉 PHP 解析器书写是一个 heredoc。


### PHP 运算符

* PHP 算术运算符：`+` `-` `*` `/` `%` `-` `.`
* PHP 赋值运算符：`=` `+=` `-=` `*=` `/=` `%=` `.=`
* PHP 递增/递减运算符：`前置++` `后置++` `前置--` `后置--`
* PHP 比较运算符：`==` `===` `!=` `<>` `!==` `>` `<` `>=` `<=`
* PHP 逻辑运算符：`and` `or` `xor` `&&` `||` `!`
* PHP 数组运算符：`+` `==` `===` `!=` `<>` `!==`
* PHP 三元运算符：`? :`
* PHP 组合运算符，又称太空船操作符：`<=>` 
组合比较运算符可以轻松实现两个变量的比较，当然不仅限于数值类数据的比较
```
$c = $a <=> $b;

如果$a > $b, $c 的值为1
如果$a == $b, $c 的值为0
如果$a < $b, $c 的值为-1
```

### PHP 条件语句

`if...elseif...else`

`switch`

`while`

`do...while`

`for`

`foreach ($array as $value) {}`

`foreach ($array as $key => $value) {}`

### PHP 数组

数组是一个能在单个变量中存储多个值的特殊变量，使用 `array()` 创建数组。

获取数组的长度 `count()`

关联数组：带有指定的键的数组，每个键关联一个值。

使用 `foreach` 循环，遍历关联数组。

```php
<?php
$age=array("Peter"=>"35","Ben"=>"37","Joe"=>"43");
 
foreach($age as $x=>$x_value)
{
    echo "Key=" . $x . ", Value=" . $x_value;
    echo "<br>";
}
?>
```

`sort()` - 对数组进行升序排列

`rsort()` - 对数组进行降序排列

`asort()` - 根据数组的值，对数组进行升序排列

`ksort()` - 根据数组的键，对数组进行升序排列

`arsort()` - 根据数组的值，对数组进行降序排列

`krsort()` - 根据数组的键，对数组进行降序排列

### PHP 超级全局变量

这意味着它们在一个脚本的全部作用域中都可用。

`$GLOBALS`：一个包含了全部变量的全局组合数组。

`$_SERVER`：一个包含了诸如头信息(header)、路径(path)、以及脚本位置(script locations)等等信息的数组。

`$_REQUEST`：用于收集HTML表单提交的数据。

`$_POST`：被广泛应用于收集表单数据。

`$_GET`：被广泛应用于收集表单数据。

### PHP 函数

PHP 有丰富的内建函数。

```php
<?php
function functionName()
{
    // 要执行的代码
}
?>
```

`unlink()`: 删除一个文件。

### PHP 魔数变量

PHP 向它运行的任何脚本提供了大量的预定义常量。

`__LINE__`：文件中的当前行号。

`__FILE__`：文件的完整路径和文件名。

`__DIR__`：文件所在的目录。如果用在被包括文件中，则返回被包括的文件所在的目录。

`__FUNCTION__`：函数名称。

`__CLASS__`：类的名称。

`__TRAIT__`：代码复用的一个方法。

`__METHOD__`：类的方法名，区分大小写。

`__NAMESPACE__`：当前命名空间的名称（区分大小写）。

### PHP 垃圾收集

PHP 使用引用计数和写时复制来管理内存。写时复制保证了变量间复制值不浪费内存，引用计数保证了不再需要时将内存释放给操作系统。


